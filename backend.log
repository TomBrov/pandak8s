#0 building with "default" instance using docker driver

#1 [internal] load build definition from backend.dockerfile
#1 transferring dockerfile: 1.44kB done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/node:22-alpine3.20
#2 DONE 1.7s

#3 [internal] load .dockerignore
#3 transferring context: 110B done
#3 DONE 0.0s

#4 [base 1/2] FROM docker.io/library/node:22-alpine3.20@sha256:2289fb1fba0f4633b08ec47b94a89c7e20b829fc5679f9b7b298eaa2f1ed8b7e
#4 resolve docker.io/library/node:22-alpine3.20@sha256:2289fb1fba0f4633b08ec47b94a89c7e20b829fc5679f9b7b298eaa2f1ed8b7e 0.0s done
#4 sha256:2289fb1fba0f4633b08ec47b94a89c7e20b829fc5679f9b7b298eaa2f1ed8b7e 6.43kB / 6.43kB done
#4 sha256:35d1e2d251585b806c41f71d0933d7ba3afb6374ee3745523c2ae406480f6bc7 1.72kB / 1.72kB done
#4 sha256:6b49ab3cd9c3c4f7d52aa86e5ebf9c55219b48707c9397a76141611345fe5c7b 6.21kB / 6.21kB done
#4 sha256:0a9a5dfd008f05ebc27e4790db0709a29e527690c21bcbcd01481eaeb6bb49dc 0B / 3.63MB 0.1s
#4 sha256:ba4caef5715cce5e7de0253509b9ce257994ec6f40fd8e86f0d3846296ea3675 0B / 51.06MB 0.1s
#4 sha256:0c6d1cca32590d82bab0b754ec382d51e3404db6737b967cf0837d2964ef6029 0B / 1.39MB 0.1s
#4 sha256:0c6d1cca32590d82bab0b754ec382d51e3404db6737b967cf0837d2964ef6029 1.39MB / 1.39MB 0.2s done
#4 sha256:82bea49235a67cfa65fc9a72aa287a09ee77e7b4f561791239b5862112e875c5 0B / 448B 0.3s
#4 extracting sha256:0a9a5dfd008f05ebc27e4790db0709a29e527690c21bcbcd01481eaeb6bb49dc
#4 ...

#5 [internal] load build context
#5 transferring context: 64.12MB 0.4s done
#5 DONE 0.5s

#4 [base 1/2] FROM docker.io/library/node:22-alpine3.20@sha256:2289fb1fba0f4633b08ec47b94a89c7e20b829fc5679f9b7b298eaa2f1ed8b7e
#4 sha256:0a9a5dfd008f05ebc27e4790db0709a29e527690c21bcbcd01481eaeb6bb49dc 3.63MB / 3.63MB 0.3s done
#4 extracting sha256:0a9a5dfd008f05ebc27e4790db0709a29e527690c21bcbcd01481eaeb6bb49dc 0.1s done
#4 sha256:ba4caef5715cce5e7de0253509b9ce257994ec6f40fd8e86f0d3846296ea3675 25.17MB / 51.06MB 0.6s
#4 sha256:82bea49235a67cfa65fc9a72aa287a09ee77e7b4f561791239b5862112e875c5 448B / 448B 0.5s done
#4 sha256:ba4caef5715cce5e7de0253509b9ce257994ec6f40fd8e86f0d3846296ea3675 38.80MB / 51.06MB 0.7s
#4 sha256:ba4caef5715cce5e7de0253509b9ce257994ec6f40fd8e86f0d3846296ea3675 51.06MB / 51.06MB 0.8s done
#4 extracting sha256:ba4caef5715cce5e7de0253509b9ce257994ec6f40fd8e86f0d3846296ea3675
#4 extracting sha256:ba4caef5715cce5e7de0253509b9ce257994ec6f40fd8e86f0d3846296ea3675 1.2s done
#4 extracting sha256:0c6d1cca32590d82bab0b754ec382d51e3404db6737b967cf0837d2964ef6029
#4 extracting sha256:0c6d1cca32590d82bab0b754ec382d51e3404db6737b967cf0837d2964ef6029 0.1s done
#4 extracting sha256:82bea49235a67cfa65fc9a72aa287a09ee77e7b4f561791239b5862112e875c5 done
#4 DONE 2.3s

#6 [base 2/2] RUN npm install -g turbo@^2.3.3
#6 1.424 
#6 1.424 added 2 packages in 1s
#6 1.425 npm notice
#6 1.425 npm notice New major version of npm available! 10.9.2 -> 11.4.2
#6 1.425 npm notice Changelog: https://github.com/npm/cli/releases/tag/v11.4.2
#6 1.425 npm notice To update run: npm install -g npm@11.4.2
#6 1.425 npm notice
#6 DONE 2.1s

#7 [pruner 1/5] WORKDIR /app
#7 DONE 0.1s

#8 [runner 1/9] WORKDIR /home/node/app
#8 DONE 0.1s

#9 [runner 2/9] RUN apk add --no-cache libssl3 dumb-init ffmpeg bash
#9 ...

#10 [builder 2/8] COPY .npmrc .
#10 DONE 0.2s

#11 [pruner 2/5] COPY apps/backend ./apps/backend
#11 DONE 0.2s

#9 [runner 2/9] RUN apk add --no-cache libssl3 dumb-init ffmpeg bash
#9 0.315 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/x86_64/APKINDEX.tar.gz
#9 ...

#12 [pruner 3/5] COPY libs ./libs
#12 DONE 0.1s

#13 [pruner 4/5] COPY package.json package-lock.json ./
#13 DONE 0.1s

#14 [pruner 5/5] RUN turbo prune --docker --scope=backend
#14 0.280  WARNING  No locally installed `turbo` found. Using version: 2.5.4.
#14 0.285 
#14 0.285 Attention:
#14 0.285 Turborepo now collects completely anonymous telemetry regarding usage.
#14 0.285 This information is used to shape the Turborepo roadmap and prioritize features.
#14 0.285 You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
#14 0.285 https://turborepo.com/docs/telemetry
#14 0.285 
#14 0.286 turbo 2.5.4
#14 0.286 
#14 0.347 Generating pruned monorepo for backend in /app/out
#14 0.352  - Added @libraries/backend-common
#14 0.353  - Added @libraries/eslint-config
#14 0.362  - Added @libraries/prisma-client
#14 0.365  - Added @libraries/shared-core
#14 0.365  - Added @libraries/typescript-config
#14 0.401  - Added backend
#14 DONE 0.6s

#9 [runner 2/9] RUN apk add --no-cache libssl3 dumb-init ffmpeg bash
#9 0.814 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/x86_64/APKINDEX.tar.gz
#9 1.162 (1/112) Installing ncurses-terminfo-base (6.4_p20240420-r2)
#9 1.219 (2/112) Installing libncursesw (6.4_p20240420-r2)
#9 1.278 (3/112) Installing readline (8.2.10-r0)
#9 1.333 (4/112) Installing bash (5.2.26-r0)
#9 ...

#15 [builder 3/8] COPY --from=pruner /app/out/json/ .
#15 DONE 0.1s

#9 [runner 2/9] RUN apk add --no-cache libssl3 dumb-init ffmpeg bash
#9 1.398 Executing bash-5.2.26-r0.post-install
#9 1.400 (5/112) Installing dumb-init (1.2.5-r3)
#9 1.454 (6/112) Installing libSvtAv1Enc (2.0.0-r1)
#9 1.578 (7/112) Installing aom-libs (3.9.1-r0)
#9 1.683 (8/112) Installing libxau (1.0.11-r4)
#9 ...

#16 [builder 4/8] COPY --from=pruner /app/out/full/ .
#16 DONE 0.3s

#9 [runner 2/9] RUN apk add --no-cache libssl3 dumb-init ffmpeg bash
#9 1.736 (9/112) Installing libmd (1.1.0-r0)
#9 1.790 (10/112) Installing libbsd (0.12.2-r0)
#9 ...

#17 [builder 5/8] COPY apps/backend/turbo.json .
#17 DONE 0.1s

#9 [runner 2/9] RUN apk add --no-cache libssl3 dumb-init ffmpeg bash
#9 1.844 (11/112) Installing libxdmcp (1.1.5-r1)
#9 1.897 (12/112) Installing libxcb (1.16.1-r0)
#9 1.958 (13/112) Installing libx11 (1.8.9-r1)
#9 2.036 (14/112) Installing hwdata-pci (0.382-r0)
#9 2.101 (15/112) Installing libpciaccess (0.18.1-r0)
#9 2.155 (16/112) Installing libdrm (2.4.120-r0)
#9 2.214 (17/112) Installing libxext (1.3.6-r2)
#9 2.269 (18/112) Installing libxfixes (6.0.1-r4)
#9 2.322 (19/112) Installing libffi (3.4.6-r0)
#9 2.375 (20/112) Installing wayland-libs-client (1.22.0-r4)
#9 2.428 (21/112) Installing libva (2.21.0-r0)
#9 2.486 (22/112) Installing libvdpau (1.5-r3)
#9 2.542 (23/112) Installing onevpl-libs (2023.3.1-r2)
#9 2.599 (24/112) Installing ffmpeg-libavutil (6.1.1-r8)
#9 2.666 (25/112) Installing libdav1d (1.4.2-r0)
#9 2.736 (26/112) Installing openexr-libiex (3.1.13-r1)
#9 2.794 (27/112) Installing openexr-libilmthread (3.1.13-r1)
#9 2.847 (28/112) Installing imath (3.1.12-r0)
#9 2.903 (29/112) Installing openexr-libopenexr (3.1.13-r1)
#9 2.979 (30/112) Installing brotli-libs (1.1.0-r2)
#9 3.043 (31/112) Installing giflib (5.2.2-r0)
#9 3.097 (32/112) Installing libhwy (1.0.7-r0)
#9 3.150 (33/112) Installing libjpeg-turbo (3.0.3-r0)
#9 3.210 (34/112) Installing lcms2 (2.16-r0)
#9 3.268 (35/112) Installing libpng (1.6.44-r0)
#9 3.325 (36/112) Installing libjxl (0.10.2-r0)
#9 3.411 (37/112) Installing lame-libs (3.100-r5)
#9 3.468 (38/112) Installing opus (1.5.2-r0)
#9 3.538 (39/112) Installing rav1e-libs (0.7.1-r0)
#9 3.609 (40/112) Installing libgomp (13.2.1_git20240309-r1)
#9 3.668 (41/112) Installing soxr (0.1.3-r7)
#9 3.723 (42/112) Installing ffmpeg-libswresample (6.1.1-r8)
#9 3.779 (43/112) Installing libogg (1.3.5-r5)
#9 3.833 (44/112) Installing libtheora (1.1.1-r18)
#9 3.893 (45/112) Installing libvorbis (1.3.7-r2)
#9 3.954 (46/112) Installing libvpx (1.14.1-r0)
#9 4.034 (47/112) Installing libsharpyuv (1.3.2-r0)
#9 4.087 (48/112) Installing libwebp (1.3.2-r0)
#9 4.148 (49/112) Installing libwebpmux (1.3.2-r0)
#9 4.202 (50/112) Installing x264-libs (0.164_git20231001-r0)
#9 4.274 (51/112) Installing numactl (2.0.18-r0)
#9 4.328 (52/112) Installing x265-libs (3.6-r0)
#9 4.491 (53/112) Installing xvidcore (1.3.7-r2)
#9 4.567 (54/112) Installing ffmpeg-libavcodec (6.1.1-r8)
#9 4.749 (55/112) Installing sdl2 (2.28.5-r1)
#9 4.817 (56/112) Installing alsa-lib (1.2.11-r0)
#9 4.886 (57/112) Installing libexpat (2.7.0-r0)
#9 4.939 (58/112) Installing libbz2 (1.0.8-r6)
#9 4.993 (59/112) Installing freetype (2.13.2-r0)
#9 5.057 (60/112) Installing fontconfig (2.15.0-r1)
#9 5.121 (61/112) Installing fribidi (1.0.15-r0)
#9 5.175 (62/112) Installing libintl (0.22.5-r0)
#9 5.230 (63/112) Installing libeconf (0.6.3-r0)
#9 5.283 (64/112) Installing libblkid (2.40.1-r1)
#9 5.338 (65/112) Installing libmount (2.40.1-r1)
#9 5.394 (66/112) Installing pcre2 (10.43-r0)
#9 5.456 (67/112) Installing glib (2.80.5-r0)
#9 5.563 (68/112) Installing graphite2 (1.3.14-r6)
#9 5.621 (69/112) Installing harfbuzz (8.5.0-r0)
#9 5.690 (70/112) Installing libunibreak (6.1-r0)
#9 5.755 (71/112) Installing libass (0.17.2-r0)
#9 5.811 (72/112) Installing libbluray (1.3.4-r1)
#9 5.883 (73/112) Installing mpg123-libs (1.32.8-r0)
#9 5.942 (74/112) Installing libopenmpt (0.7.7-r0)
#9 6.010 (75/112) Installing cjson (1.7.18-r0)
#9 6.063 (76/112) Installing mbedtls (3.6.3-r0)
#9 6.129 (77/112) Installing librist (0.2.10-r1)
#9 6.185 (78/112) Installing libsrt (1.5.3-r0)
#9 6.251 (79/112) Installing libssh (0.10.6-r0)
#9 6.309 (80/112) Installing xz-libs (5.6.2-r1)
#9 6.365 (81/112) Installing libxml2 (2.12.10-r0)
#9 6.429 (82/112) Installing libsodium (1.0.19-r0)
#9 6.486 (83/112) Installing libzmq (4.3.5-r2)
#9 6.546 (84/112) Installing ffmpeg-libavformat (6.1.1-r8)
#9 6.639 (85/112) Installing serd-libs (0.32.2-r0)
#9 6.693 (86/112) Installing zix-libs (0.4.2-r0)
#9 6.747 (87/112) Installing sord-libs (0.16.16-r0)
#9 6.801 (88/112) Installing sratom (0.6.16-r0)
#9 6.854 (89/112) Installing lilv-libs (0.24.24-r1)
#9 6.920 (90/112) Installing glslang-libs (1.3.261.1-r0)
#9 7.014 (91/112) Installing libdovi (3.3.0-r0)
#9 7.074 (92/112) Installing spirv-tools (1.3.261.1-r0)
#9 7.158 (93/112) Installing shaderc (2024.0-r0)
#9 7.215 (94/112) Installing vulkan-loader (1.3.261.1-r0)
#9 7.275 (95/112) Installing libplacebo (6.338.2-r1)
#9 7.342 (96/112) Installing ffmpeg-libpostproc (6.1.1-r8)
#9 7.397 (97/112) Installing ffmpeg-libswscale (6.1.1-r8)
#9 7.457 (98/112) Installing vidstab (1.1.1-r0)
#9 7.512 (99/112) Installing zimg (3.0.5-r2)
#9 7.574 (100/112) Installing ffmpeg-libavfilter (6.1.1-r8)
#9 7.685 (101/112) Installing libasyncns (0.8-r3)
#9 7.740 (102/112) Installing dbus-libs (1.14.10-r1)
#9 7.797 (103/112) Installing libltdl (2.4.7-r3)
#9 7.852 (104/112) Installing orc (0.4.40-r0)
#9 7.914 (105/112) Installing libflac (1.4.3-r1)
#9 7.985 (106/112) Installing libsndfile (1.2.2-r1)
#9 8.044 (107/112) Installing speexdsp (1.2.1-r2)
#9 8.099 (108/112) Installing tdb-libs (1.4.9-r1)
#9 8.153 (109/112) Installing libpulse (17.0-r0)
#9 8.220 (110/112) Installing v4l-utils-libs (1.24.1-r1)
#9 8.284 (111/112) Installing ffmpeg-libavdevice (6.1.1-r8)
#9 8.342 (112/112) Installing ffmpeg (6.1.1-r8)
#9 8.404 Executing busybox-1.36.1-r29.trigger
#9 8.408 Executing glib-2.80.5-r0.trigger
#9 8.412 OK: 134 MiB in 128 packages
#9 ...

#18 [builder 6/8] RUN npm install
#18 6.000 npm warn deprecated inflight@1.0.6: This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.
#18 6.658 npm warn deprecated superagent@8.1.2: Please upgrade to v9.0.0+ as we have fixed a public vulnerability with formidable dependency. Note that v9.0.0+ requires Node.js v14.18.0+. See https://github.com/ladjs/superagent/pull/1800 for insight. This project is supported and maintained by the team at Forward Email @ https://forwardemail.net
#18 6.663 npm warn deprecated domexception@4.0.0: Use your platform's native DOMException instead
#18 11.31 npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
#18 11.85 npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
#18 11.99 npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
#18 12.56 npm warn deprecated glob@7.2.3: Glob versions prior to v9 are no longer supported
#18 ...

#9 [runner 2/9] RUN apk add --no-cache libssl3 dumb-init ffmpeg bash
#9 DONE 21.0s

#18 [builder 6/8] RUN npm install
#18 26.06 
#18 26.06 > 1337-jupiter-monorepo@1.20.0 prepare
#18 26.06 > husky
#18 26.06 
#18 26.10 .git can't be found
#18 26.13 added 1853 packages, and audited 1860 packages in 26s
#18 26.13 
#18 26.13 397 packages are looking for funding
#18 26.13   run `npm fund` for details
#18 26.13 
#18 26.13 4 moderate severity vulnerabilities
#18 26.13 
#18 26.13 To address all issues possible, run:
#18 26.13   npm audit fix --force
#18 26.13 
#18 26.13 Some issues need review, and may require choosing
#18 26.13 a different dependency.
#18 26.13 
#18 26.13 Run `npm audit` for details.
#18 DONE 37.3s

#19 [builder 7/8] RUN npx turbo run build --filter=backend...
#19 0.599 
#19 0.599 Attention:
#19 0.599 Turborepo now collects completely anonymous telemetry regarding usage.
#19 0.599 This information is used to shape the Turborepo roadmap and prioritize features.
#19 0.599 You can learn more, including how to opt-out if you'd not like to participate in this anonymous program, by visiting the following URL:
#19 0.599 https://turborepo.com/docs/telemetry
#19 0.599 
#19 0.600 turbo 2.5.4
#19 0.600 
#19 0.663 â€¢ Packages in scope: @libraries/backend-common, @libraries/eslint-config, @libraries/prisma-client, @libraries/shared-core, @libraries/typescript-config, backend
#19 0.663 â€¢ Running build in 6 packages
#19 0.663 â€¢ Remote caching disabled
#19 0.868 @libraries/prisma-client:prisma:generate: cache miss, executing 5a895d97a2f23fe7
#19 0.868 @libraries/shared-core:build: cache miss, executing a1f1c19e6d7c54b5
#19 1.031 @libraries/shared-core:build: 
#19 1.031 @libraries/shared-core:build: > @libraries/shared-core@1.0.0 build
#19 1.031 @libraries/shared-core:build: > tsc -p tsconfig.lib.json
#19 1.031 @libraries/shared-core:build: 
#19 1.031 @libraries/prisma-client:prisma:generate: 
#19 1.031 @libraries/prisma-client:prisma:generate: > @libraries/prisma-client@1.0.0 prisma:generate
#19 1.031 @libraries/prisma-client:prisma:generate: > prisma generate
#19 1.031 @libraries/prisma-client:prisma:generate: 
#19 1.877 @libraries/prisma-client:prisma:generate: Prisma schema loaded from schema
#19 9.589 @libraries/prisma-client:prisma:generate: Error: Could not resolve @prisma/client despite the installation that we just tried.
#19 9.589 @libraries/prisma-client:prisma:generate: Please try to install it by hand with npm i @prisma/client and rerun npx "prisma generate" ðŸ™.
#19 9.598 @libraries/prisma-client:prisma:generate: npm error Lifecycle script `prisma:generate` failed with error:
#19 9.598 @libraries/prisma-client:prisma:generate: npm error code 1
#19 9.598 @libraries/prisma-client:prisma:generate: npm error path /app/libs/prisma
#19 9.598 @libraries/prisma-client:prisma:generate: npm error workspace @libraries/prisma-client@1.0.0
#19 9.598 @libraries/prisma-client:prisma:generate: npm error location /app/libs/prisma
#19 9.598 @libraries/prisma-client:prisma:generate: npm error command failed
#19 9.598 @libraries/prisma-client:prisma:generate: npm error command sh -c prisma generate
#19 9.605 @libraries/prisma-client:prisma:generate: ERROR: command finished with error: command (/app/libs/prisma) /usr/local/bin/npm run prisma:generate exited (1)
#19 9.605 @libraries/prisma-client#prisma:generate: command (/app/libs/prisma) /usr/local/bin/npm run prisma:generate exited (1)
#19 9.606 
#19 9.606  Tasks:    1 successful, 2 total
#19 9.606 Cached:    0 cached, 2 total
#19 9.606   Time:    9.001s 
#19 9.606 Failed:    @libraries/prisma-client#prisma:generate
#19 9.606 
#19 9.611  ERROR  run failed: command  exited (1)
#19 ERROR: process "/bin/sh -c npx turbo run build --filter=backend..." did not complete successfully: exit code: 1
------
 > [builder 7/8] RUN npx turbo run build --filter=backend...:
9.598 @libraries/prisma-client:prisma:generate: npm error command sh -c prisma generate
9.605 @libraries/prisma-client:prisma:generate: ERROR: command finished with error: command (/app/libs/prisma) /usr/local/bin/npm run prisma:generate exited (1)
9.605 @libraries/prisma-client#prisma:generate: command (/app/libs/prisma) /usr/local/bin/npm run prisma:generate exited (1)
9.606 
9.606  Tasks:    1 successful, 2 total
9.606 Cached:    0 cached, 2 total
9.606   Time:    9.001s 
9.606 Failed:    @libraries/prisma-client#prisma:generate
9.606 
9.611  ERROR  run failed: command  exited (1)
------

 2 warnings found (use docker --debug to expand):
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ARG "SHARED_TOKEN") (line 15)
 - SecretsUsedInArgOrEnv: Do not use ARG or ENV instructions for sensitive data (ENV "SHARED_TOKEN") (line 16)
backend.dockerfile:28
--------------------
  26 |     
  27 |     # Copy full source for build
  28 | >>> RUN npx turbo run build --filter=backend...
  29 |     RUN npx turbo run prisma:generate --filter=backend...
  30 |     
--------------------
ERROR: failed to solve: process "/bin/sh -c npx turbo run build --filter=backend..." did not complete successfully: exit code: 1
Error: Process completed with exit code 1.
