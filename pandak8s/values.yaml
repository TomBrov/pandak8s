ingress-nginx:
  controller:
    enabled: true
    service:
      type: LoadBalancer
      annotations:
        service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
        service.beta.kubernetes.io/aws-load-balancer-scheme: "internet-facing"
        service.beta.kubernetes.io/disable-ssl: "true"
    ingressClass: nginx
    ingressClassResource:
      name: nginx

ingress:
  name: application-ingress
  className: nginx
  annotations:
    nginx.ingress.kubernetes.io/ssl-redirect: "false"
    nginx.ingress.kubernetes.io/force-ssl-redirect: "false"
    nginx.ingress.kubernetes.io/ssl-passthrough: "false"


frontend:
  name: frontend
  appLabel: frontend
  replicaCount: 2
  containerPort: 80
  image:
    repository: 058264138725.dkr.ecr.us-east-2.amazonaws.com/pandak8s-web
    tag: latest
    pullPolicy: Always
  env:
    backendHost: backend
  service:
    port: 80
    type: ClusterIP

backend:
  name: backend
  appLabel: backend
  replicaCount: 3
  containerPort: 8080
  image:
    repository: 058264138725.dkr.ecr.us-east-2.amazonaws.com/pandak8s-api
    tag: latest
    pullPolicy: Always
  service:
    port: 80
    type: ClusterIP
  serviceAccountName: backend-sa
  rbac:
    enabled: true
    fullAccessRole:
      name: backend-full-access
      rules:
        - apiGroups: [""]
          resources: ["pods", "services"]
          verbs: ["get", "list", "create", "update", "delete"]
        - apiGroups: ["apps"]
          resources: ["deployments"]
          verbs: ["get", "list", "create", "update", "delete"]
    fullAccessBinding:
      name: backend-clusterrole-binding
    readonlyRole:
      name: backend-readonly
      namespace: kube-system
      rules:
        - apiGroups: [""]
          resources: ["pods", "services"]
          verbs: ["get", "list"]
        - apiGroups: ["apps"]
          resources: ["deployments"]
          verbs: ["get", "list"]
    readonlyBinding:
      name: backend-readonly-binding